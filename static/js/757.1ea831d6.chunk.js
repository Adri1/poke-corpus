!function(){"use strict";function e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function r(r,t){return function(e){if(Array.isArray(e))return e}(r)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,s,u,o,a=[],l=!0,c=!1;try{if(u=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=u.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(i){c=!0,s=i}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}(r,t)||function(r,t){if(r){if("string"===typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(r,t):void 0}}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var t=JSON.parse('{"s":{"DiamondPearl":{"languages":["ja-Hrkt-JP","en-US","en-GB","fr-FR","it-IT","de-DE","es-ES","ko-KR"],"structured":true,"version":null,"files":["msg"]},"Platinum":{"languages":["ja-Hrkt-JP","en-US","en-GB","fr-FR","it-IT","de-DE","es-ES","ko-KR"],"structured":true,"version":null,"files":["msg"]},"HeartGoldSoulSilver":{"languages":["ja-Hrkt-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR"],"structured":true,"version":null,"files":["msg"]},"BlackWhite":{"languages":["en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR"],"structured":true,"version":null,"files":["common","script"]},"Black2White2":{"languages":["ja-Hrkt-JP","ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR"],"structured":true,"version":null,"files":["common","script"]},"XY":{"languages":["ja-Hrkt-JP","ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR"],"structured":true,"version":null,"files":["common","script"]},"OmegaRubyAlphaSapphire":{"languages":["ja-Hrkt-JP","ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR"],"structured":true,"version":null,"files":["common","script"]},"SunMoon":{"languages":["ja-Hrkt-JP","ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR","zh-CN","zh-TW"],"structured":true,"version":null,"files":["common","script"]},"UltraSunUltraMoon":{"languages":["ja-Hrkt-JP","ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR","zh-CN","zh-TW"],"structured":true,"version":null,"files":["common","script"]},"LetsGoPikachuLetsGoEevee":{"languages":["ja-Hrkt-JP","ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR","zh-CN","zh-TW"],"structured":true,"version":null,"files":["common","script"]},"SwordShield":{"languages":["ja-Hrkt-JP","ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR","zh-CN","zh-TW"],"structured":true,"version":"1.3.0","files":["common","script"]},"LegendsArceus":{"languages":["ja-Hrkt-JP","ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR","zh-CN","zh-TW"],"structured":true,"version":"1.1.0","files":["common","script"]},"ScarletViolet":{"languages":["ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR","zh-CN","zh-TW"],"structured":true,"version":"1.3.2","files":["common","script"]},"Bank":{"languages":["ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR","zh-CN","zh-TW"],"structured":true,"version":"1.4","files":["common"]},"HOME":{"languages":["ja-JP","en-US","fr-FR","it-IT","de-DE","es-ES","ko-KR","zh-CN","zh-TW"],"structured":true,"version":"3.0.0","files":["common"]}}}');self.onmessage=function(e){var n=e.data,s=n.regex?new RegExp(n.query,n.caseInsensitive?"ui":"u"):null,u=[],o=0,a=n.collections.length,l=0,c=Object.entries(t.s).filter((function(e){var t=r(e,2),s=t[0];t[1];return n.collections.includes(s)})).map((function(e){var t=r(e,2),n=(t[0],t[1]);return n.languages.length*n.files.length})).reduce((function(e,r){return e+r}),0);n.collections.forEach((function(e){var i=t.s[e];o++,postMessage({complete:!1,status:"loading",progress:o/a*.1,resultsLanguages:[],results:[]}),n.languages.every((function(e){return!i.languages.includes(e)}))||i.files.forEach((function(t){if(("common"!==t||n.common)&&("script"!==t||n.script)){var o=[];i.languages.forEach((function(r){var u="/poke-corpus"+"/corpus/".concat(e,"/").concat(r,"_").concat(t,".txt");o.push(caches.open("v1").then((function(e){return e.match(u).then((function(r){return null!==r&&void 0!==r?r:fetch(u).then((function(r){return e.put(u,r).then((function(){return e.match(u).then((function(e){return null!==e&&void 0!==e?e:fetch(u)}))}))}))}))})).catch((function(){return fetch(u)})).then((function(e){return e.text()})).then((function(e){var t=e.split(/\r\n|\n/),u=[];return l++,postMessage({complete:!1,status:"processing",progress:.1+l/c*.8,resultsLanguages:[],results:[]}),n.languages.includes(r)&&t.forEach((function(e,r){(n.regex&&null!==s&&e.match(s)||!n.regex&&!n.caseInsensitive&&e.includes(n.query)||!n.regex&&n.caseInsensitive&&(e.toLowerCase().includes(n.query.toLowerCase())||e.toUpperCase().includes(n.query.toUpperCase())))&&u.push(r)})),[[r,t],u]})))})),u.push(Promise.all(o).then((function(n){var s=[],u=new Set,o=[];return n.forEach((function(e){var t=r(e,2),n=r(t[0],2),a=n[0],l=n[1],c=t[1];s.push(a),c.forEach((function(e){return u.add(e)})),o.push(l)})),[[e,t],s,u,o]})))}}))}));var i=[],f=[],g=0;Promise.all(u).then((function(e){return e})).then((function(e){return e.forEach((function(t){var n=r(t,4),s=r(n[0],2),u=s[0],o=s[1],a=n[1],l=n[2],c=n[3],h=[];g++,postMessage({complete:!1,status:"collecting",progress:.9+g/e.length*.1,resultsLanguages:[],results:[]}),Array.from(l).sort().forEach((function(e){var r=c.map((function(r){var t;return(null!==(t=r[e])&&void 0!==t?t:"").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(/\\r\\n|\\c\\n|\\n/g,"<br>").replaceAll(/\\r|\\c|\\l|\\x25BD/g,"<br>").replaceAll(/\{([^|}]+)\|([^|}]+)\}/g,"<ruby>$1<rp>(</rp><rt>$2</rt><rp>)</rp></ruby>").trimStart()}));h.push(r)})),i.push(a),f.push([u,o,h])}))})).then((function(){return postMessage({complete:!0,status:"done",progress:1,resultsLanguages:i,results:f})})).catch((function(e){console.error(e),postMessage({complete:!0,status:"error",progress:1,resultsLanguages:[],results:[]})}))}}();
//# sourceMappingURL=757.1ea831d6.chunk.js.map